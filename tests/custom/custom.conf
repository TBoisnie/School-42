server {
	listen			127.0.0.1:8080;

	root			/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site;
	cgi_ext			.php /usr/bin/php-cgi;

	error_page		401 error.html;

	client_max_body_size	3M;

	location / {
		index			index.html index.php;
		allow_request	GET HEAD POST OPTIONS CONNECT TRACE;
	}

	location /admin {
		allow_request	GET HEAD POST;
		index			secret.php;

		upload_dir		/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/upload;

		auth_basic 				"tboisnie";
		auth_basic_user_file 	/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/admin/.htpasswd;
	}

	location /images {
		allow_request	GET HEAD;
		root			/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/public/img;
		autoindex		on;
	}
}

server {
	listen			127.0.0.1:8080;
	server_name		dev.local;

	root			/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/partials;

	location / {
		index			index.html index.php;
		allow_request	GET HEAD POST;
		autoindex		on;

		cgi_ext			.php /usr/bin/php-cgi;
	}
}

server {
	listen			127.0.0.1:8081;
	server_name		test.local;

	root			/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/public;
	autoindex		on;
}

server {
	listen			127.0.0.2:8080;
	server_name		dev2.local;

	root			/home/kurobayashi/Dev/Git-42/core-5-webserv/tests/custom/site/upload;

	location / {
		allow_request	GET HEAD PUT DELETE;
		autoindex		on;
		upload_dir		.;
	}
}
